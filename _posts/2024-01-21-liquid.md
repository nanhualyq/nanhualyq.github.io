---
title: (WIP) 学点 Liquid 模板引擎，玩好 Jekyll 博客生成
---

{% raw %}
## 简介
- 功能：模板引擎本质上就是一种文本替换
- 来自：Shopify（一个电商系统）
- 开发语言：Ruby
- 官网：https://shopify.github.io/liquid/

## 从两个形态出发
- {{ }}
- {% %}

## {{ }}
```liquid
# 输出一个变量
{{ page.title }}

# 输出文本之前，用过滤器先处理一下
{{ "/my/fancy/url" | append: ".html" }}
```

## {% %}
### 声明变量
```liquid
{% assign my_string = "Hello World!" %}

# 除了 "Hello World!"，也可以是：
# Number 如 25
# Bool 如 true
# 等等
```
### Tag
所谓Tag，就是像 HTML 标签一样，有开始和结尾两个部分，包含中间代码，也可以理解为就是一个代码块。

#### 逻辑判断
```liquid
# if
{% if product.title == "Awesome Shoes" %}
  These shoes are awesome!
{% endif %}

# unless（和if相反，相当于 if product.title != "Awesome Shoes"）
{% unless product.title == "Awesome Shoes" %}
  These shoes are not awesome.
{% endunless %}

# elsif/else
{% if customer.name == "kevin" %}
  Hey Kevin!
{% elsif customer.name == "anonymous" %}
  Hey Anonymous!
{% else %}
  Hi Stranger!
{% endif %}

# case/when
{% assign handle = "cake" %}
{% case handle %}
  {% when "cake" %}
     This is a cake
  {% when "cookie", "biscuit" %}
     This is a cookie
  {% else %}
     This is not a cake nor a cookie
{% endcase %}
```
#### 循环
```liquid
# 遍历数组
{% for product in collection.products %}
  {{ product.title }}
{% endfor %}

# else 部分在数组是空的时候才执行
{% for product in collection.products %}
  {{ product.title }}
{% else %}
  The collection is empty.
{% endfor %}

# break AND continue
{% for i in (1..5) %}
	{% break %}
	{% continue %}
{% endfor %}

# for + 参数
{% for item in array limit:2 %}
limit:2 部分就是参数
limit 循环次数上限
offset 从指定索引开始
(n1..n2) n1、n2是数值，表示生成一个数组，从n1到n2
reversed 颠倒数组的顺序

# forloop 每个迭代能获取到的相关信息
{
  "first": true,
  "index": 1,
  "index0": 0,
  "last": false,
  "length": 4,
  "rindex": 3
}
{% for flavor in smoothie_flavors -%}
  {%- if forloop.length > 0 -%}
    {{ flavor }}{% unless forloop.last %}-{% endunless -%}
  {%- endif -%}
{% endfor %}

# cycle
一段小循环，用在for里面，每次输出下一个字符串
{% cycle "one", "two", "three" %}

加个名字可以分组，不同分组各自计数执行情况
{% cycle "first": "one", "two", "three" %}
{% cycle "second": "one", "two", "three" %}

# tablerow
输出一个tr，内部遍历输出td
<table>
{% tablerow product in collection.products %}
  {{ product.title }}
{% endtablerow %}

加参数
{% tablerow product in collection.products cols:2 %}
col 多少个列
limit 同for的
offset 同for的
(n1..n2) 同for的

tablerowloop 同forloop
</table>
```

## 抑制空行
`{% assign my_variable = "tomato" %}`
该代码执行后，将会输出一个空行

想要避免这种情况，可以在内部加 `-`。

比如：`{{- -}}` 或 `{%- -%}`

{% endraw %}
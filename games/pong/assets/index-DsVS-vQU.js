var f=Object.defineProperty;var m=(c,r,t)=>r in c?f(c,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[r]=t;var h=(c,r,t)=>(m(c,typeof r!="symbol"?r+"":r,t),t);import{p as l}from"./phaser-nD4EcAQo.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();class a extends Phaser.GameObjects.Rectangle{constructor(t,i){super(t,0,0,0,0,16777215);h(this,"width",20);h(this,"height",100);i==="right"&&this.setPosition(t.game.canvas.width-this.width,0),this.setOrigin(0),this.setY(t.game.canvas.height/2-this.height),this.setData("score",0),t.add.existing(this)}moveByFrame(t){let e=this.y+(t==="down"?3:-3);e=Math.max(0,e),e=Math.min(e,this.scene.game.canvas.height-this.displayHeight),this.y=e}}const d=20;class u extends Phaser.GameObjects.Rectangle{constructor(t){super(t,0,0,d,d,16777215);h(this,"speed",4);h(this,"xSpeed",0);h(this,"ySpeed",0);t.add.existing(this),this.reset()}reset(){const{width:t,height:i}=this.scene.cameras.main;this.x=t/2,this.y=i/2;const e=new Phaser.Math.RandomDataGenerator;this.xSpeed=e.pick([this.speed,-this.speed]),this.ySpeed=e.realInRange(-this.speed,this.speed)}moveByFrame(t,i){if(this.checkOverflow(t,i))return;const e=this.checkTouchBoard(t,i);e&&(e==="y"?this.ySpeed=-this.ySpeed:this.xSpeed=-this.xSpeed),this.checkTouchTopBottom()&&(this.ySpeed=-this.ySpeed),this.x+=this.xSpeed,this.y+=this.ySpeed}checkOverflow(t,i){const{width:e}=this.scene.game.canvas,s=this.getBounds();if(s.right<0)return this.reset(),i.data.inc("score"),!0;if(s.left>e)return this.reset(),t.data.inc("score"),!0}checkTouchBoard(t,i){const e=t.getBounds(),s=i.getBounds(),o=this.getBounds();if(this.checkTouchLine(e.right,e.top,e.right,e.bottom)){const n=e.right-o.left;return e.bottom-this.y<n||o.bottom-e.top<n?"y":"x"}else if(this.checkTouchLine(s.left,s.top,s.left,s.bottom)){const n=o.right-s.left;return s.bottom-this.y<n||o.bottom-s.top<n?"y":"x"}}checkTouchTopBottom(){const{width:t,height:i}=this.scene.game.canvas;return this.checkTouchLine(0,0,t,0)||this.checkTouchLine(0,i,t,i)}checkTouchLine(t,i,e,s){const o=new Phaser.Geom.Line(t,i,e,s);return Phaser.Geom.Intersects.LineToRectangle(o,this.getBounds())}}class p extends l.Scene{constructor(){super(...arguments);h(this,"keys");h(this,"leftBoard");h(this,"rightBoard");h(this,"ball");h(this,"leftScore");h(this,"rightScore")}create(){var t;this.leftBoard=new a(this,"left"),this.rightBoard=new a(this,"right"),this.leftScore=this.add.text(this.cameras.main.centerX*.5,100,"0",{fontSize:"4rem"}),this.rightScore=this.add.text(this.cameras.main.centerX*1.5,100,"0",{fontSize:"4rem"}),this.keys=(t=this.input.keyboard)==null?void 0:t.addKeys("W,S,UP,DOWN"),this.ball=new u(this)}update(){var e,s,o,n;(e=this.keys)!=null&&e.W.isDown?this.leftBoard.moveByFrame("up"):(s=this.keys)!=null&&s.S.isDown&&this.leftBoard.moveByFrame("down"),(o=this.keys)!=null&&o.UP.isDown?this.rightBoard.moveByFrame("up"):(n=this.keys)!=null&&n.DOWN.isDown&&this.rightBoard.moveByFrame("down"),this.ball.moveByFrame(this.leftBoard,this.rightBoard);const t=this.leftBoard.data.get("score"),i=this.rightBoard.data.get("score");this.leftScore.setText(t),this.rightScore.setText(i),Math.max(t,i)>=10&&this.scene.start("score",{leftScore:t,rightScore:i})}}class g extends Phaser.Scene{constructor(){super({key:"score"});h(this,"score")}init(t){this.score=t}create(){var i,e,s;let t="Start Game";Object.keys(this.score||{}).length&&(t=`(${(i=this.score)==null?void 0:i.leftScore}) ${t} (${(e=this.score)==null?void 0:e.rightScore})`),this.add.text(this.cameras.main.centerX,this.cameras.main.centerY,t,{fontSize:"4rem",color:"#ffffff"}).setOrigin(.5),this.input.on("pointerup",()=>this.startGame()),(s=this.input.keyboard)==null||s.on("keydown",()=>this.startGame())}startGame(){this.scene.stop().start("default")}}new l.Game({width:1024,height:480,scale:{mode:Phaser.Scale.RESIZE},scene:[g,p]});
